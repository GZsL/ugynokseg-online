<!doctype html>
<html lang="hu">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Ügynökök – Intro</title>
  <link rel="stylesheet" href="styles.css" />
  <style>
    body{ background:#f8bd01; }
    .wrap{ min-height:100vh; display:flex; flex-direction:column; justify-content:center; align-items:center; gap:18px; padding:24px; box-sizing:border-box;}
    .videoBox{ width:min(1200px, 92vw); aspect-ratio:16/9; border-radius:20px; overflow:hidden; border:3px solid #2b2b2b; background:#000;}
    video{ width:100%; height:100%; object-fit:cover; display:block; }
    .menu{ display:flex; gap:12px; flex-wrap:wrap; justify-content:center; }
    .pill{ background:#282828; color:#fff; padding:10px 14px; border-radius:999px; font-weight:900; }
  </style>
</head>
<body>
  <div class="wrap">
    <div class="pill">ÜGYNÖKÖK ÉS TOLVAJOK – ONLINE MVP</div>
    <div class="videoBox">
      <video id="introVideo" autoplay muted playsinline></video>
    </div>
    <div class="menu">
      <a class="btn btn-theme" href="host.html" id="hostLink">Új szoba (Host)</a>
      <a class="btn btn-outline" href="join.html">Csatlakozás (Join)</a>
      <a class="btn btn-outline" href="setup.html" title="Régi technikai setup (player=0..3)">Setup (legacy)</a>
    </div>
  </div>

    <div id="authPill" class="pill" style="background:#1f1f1f; border:2px solid #2b2b2b;">
      <span id="authStatus">Betöltés…</span>
      <button id="authOpenBtn" class="btn btn-outline" style="margin-left:10px; padding:8px 12px;">Bejelentkezés / Regisztráció</button>
      <button id="authLogoutBtn" class="btn btn-outline" style="margin-left:10px; padding:8px 12px; display:none;">Kilépés</button>
    </div>

    <div id="authModal" style="display:none; position:fixed; inset:0; background:rgba(0,0,0,.55); align-items:center; justify-content:center; padding:24px; z-index:9999;">
      <div style="width:min(520px, 92vw); background:var(--panel); color:var(--text); border-radius:20px; border:3px solid #2b2b2b; padding:18px;">
        <div style="display:flex; align-items:center; justify-content:space-between; gap:12px;">
          <div style="font-weight:900; font-size:18px;">Fiók</div>
          <button id="authCloseBtn" class="btn btn-outline" style="padding:8px 12px;">Bezárás</button>
        </div>

        <div style="display:flex; gap:10px; margin-top:12px;">
          <button id="tabLogin" class="btn btn-theme" style="flex:1;">Belépés</button>
          <button id="tabRegister" class="btn btn-outline" style="flex:1;">Regisztráció</button>
        </div>

        <div id="authMsg" style="margin-top:12px; color:var(--muted); min-height:20px;"></div>

        <form id="loginForm" style="margin-top:10px; display:block;">
          <label class="label">E-mail</label>
          <input class="input" name="email" type="email" autocomplete="email" required />
          <label class="label" style="margin-top:10px;">Jelszó</label>
          <input class="input" name="password" type="password" autocomplete="current-password" required />
          <button class="btn btn-theme" type="submit" style="margin-top:14px; width:100%;">Belépés</button>
          <button id="forgotBtn" class="btn btn-outline" type="button" style="margin-top:10px; width:100%;">Elfelejtett jelszó</button>
        </form>

        <form id="registerForm" style="margin-top:10px; display:none;">
          <label class="label">Név</label>
          <input class="input" name="name" type="text" autocomplete="name" required />
          <label class="label" style="margin-top:10px;">E-mail</label>
          <input class="input" name="email" type="email" autocomplete="email" required />
          <label class="label" style="margin-top:10px;">Jelszó</label>
          <input class="input" name="password" type="password" autocomplete="new-password" required />
          <button class="btn btn-theme" type="submit" style="margin-top:14px; width:100%;">Regisztráció</button>
          <div style="margin-top:10px; font-size:12px; color:var(--muted);">
            Regisztráció után e-mailben küldünk megerősítő linket.
          </div>
        </form>

        <form id="forgotForm" style="margin-top:10px; display:none;">
          <label class="label">E-mail</label>
          <input class="input" name="email" type="email" autocomplete="email" required />
          <button class="btn btn-theme" type="submit" style="margin-top:14px; width:100%;">Jelszó reset link küldése</button>
          <button id="backToLoginBtn" class="btn btn-outline" type="button" style="margin-top:10px; width:100%;">Vissza</button>
        </form>
      </div>
    </div>


  <script>
    // Több intro videó esetén random választ.
    // Ha csak egy van, működik ugyanúgy.
    const SOURCES = [
      "assets/intro_animacio.mp4",
      "assets/intro_animacio_2.mp4",
      "assets/intro_animacio_3.mp4"
    ];
    const v = document.getElementById('introVid');
    const pick = SOURCES[Math.floor(Math.random()*SOURCES.length)];
    v.src = pick;
    v.addEventListener('loadedmetadata', ()=>{ v.play().catch(()=>{}); });
  </script>
<script>
const video = document.getElementById("introVideo");

const videos = [
  "assets/videos/intro1.mp4",
  "assets/videos/intro2.mp4",
  "assets/videos/intro3.mp4"
];

let lastIndex = -1;

function getRandomIndex() {
  if (videos.length <= 1) return 0;

  let index;
  do {
    index = Math.floor(Math.random() * videos.length);
  } while (index === lastIndex);

  lastIndex = index;
  return index;
}

function playRandomVideo() {
  const index = getRandomIndex();
  video.src = videos[index];
  video.play().catch(() => {});
}

// Első betöltéskor
playRandomVideo();

// Ha vége, jöjjön másik random
video.addEventListener("ended", () => {
  playRandomVideo();
});
</script>
  <script src="intro-auth.js"></script>
</body>
</html>
