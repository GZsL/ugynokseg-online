<!doctype html>
<html lang="hu">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Bejelentkezés – Ügynökség</title>
  <link rel="stylesheet" href="styles.css" />
</head>
<body>
  <div class="card" style="max-width:420px;margin:40px auto;padding:18px;">
    <h2 style="margin:0 0 14px 0;">Bejelentkezés</h2>

    <label>Email</label>
    <input id="email" placeholder="email@domain.hu" style="width:100%;margin:6px 0 10px 0;" />

    <label>Jelszó</label>
    <input id="password" type="password" placeholder="jelszó" style="width:100%;margin:6px 0 14px 0;" />

    <button id="btn" class="btn" style="width:100%;">Belépés</button>

    <div id="msg" style="margin-top:12px;min-height:18px;"></div>

    <div style="margin-top:12px;opacity:.9;">
      <a href="register.html">Nincs fiókod? Regisztráció</a>
    </div>
  </div>

<script>
  const msg = document.getElementById("msg");

  document.getElementById("btn").addEventListener("click", async () => {
    msg.textContent = "";

    const payload = {
      email: document.getElementById("email").value.trim(),
      password: document.getElementById("password").value
    };

    const r = await fetch("/api/auth/login", {
      method: "POST",
      headers: { "Content-Type": "application/json" },
      body: JSON.stringify(payload),
      credentials: "include"
    });

    const j = await r.json();
    if (!r.ok || j.error) {
      msg.textContent = j.error || "Hiba történt.";
      return;
    }

    msg.textContent = "Sikeres belépés ✅";
    setTimeout(() => location.href = "host.html", 300);
  });
</script>
</body>
</html>